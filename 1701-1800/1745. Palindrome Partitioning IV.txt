This is hdu 5340 Three Palindromes. http://bestcoder.hdu.edu.cn/contests/contest_showproblem.php?cid=611&pid=1002
O(n) using palindromic tree.

